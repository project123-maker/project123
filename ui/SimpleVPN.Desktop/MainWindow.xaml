<Window Icon="Assets/logo.ico" x:Class="SimpleVPN.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SimpleVPN" Width="420" Height="580" ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen" Background="#0D1117">
    <Window.Resources>
        <Style TargetType="Control">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        </Style>
        <Style x:Key="Pill" TargetType="Button">
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="14" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="8,0"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with logo + status -->
        <Border CornerRadius="16" Background="#121826" BorderBrush="#1E2A3B" BorderThickness="1" Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Image Source="pack://application:,,,/Assets/logo.png" Width="22" Height="22" Margin="0,0,10,0"/>
                <TextBlock Grid.Column="1" Text="SimpleVPN" Foreground="#E6EEFF" FontSize="18" FontWeight="Bold"/>
                <TextBlock Grid.Row="1" Grid.ColumnSpan="2" Text="{Binding StatusText}" Foreground="{Binding StatusBrush}" FontSize="12" Margin="0,6,0,0"/>
            </Grid>
        </Border>

        <!-- Card -->
        <Border Grid.Row="2" CornerRadius="18" Background="#0F1622" BorderBrush="#1E2A3B" BorderThickness="1" Padding="18">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="18"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Code or VLESS link" Foreground="#8EA4C8" FontSize="13"/>

                <Border Grid.Row="2" CornerRadius="12" Background="#0B1220" BorderBrush="#223047" BorderThickness="1">
                    <TextBox Text="{Binding RedeemCode, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent" BorderThickness="0" Padding="12" FontSize="16"
                             Foreground="#E6EEFF" CaretBrush="#E6EEFF"/>
                </Border>

                <!-- 2×2 Buttons -->
                <Grid Grid.Row="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="10"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Row="0" Grid.Column="0" Style="{StaticResource Pill}" Content="Redeem"
                            Command="{Binding RedeemCommand}"
                            Background="#22D3A6" Foreground="#0B1117" Margin="0,0,8,0"/>

                    <Button Grid.Row="0" Grid.Column="1" Style="{StaticResource Pill}" Content="Connect"
                            Command="{Binding ConnectCommand}"
                            Background="#1B7FFF" Foreground="White" Margin="8,0,0,0"/>

                    <Button Grid.Row="2" Grid.Column="0" Style="{StaticResource Pill}" Content="Disconnect"
                            Command="{Binding DisconnectCommand}"
                            Background="#222B3A" Foreground="#BFD1FF" Margin="0,0,8,0"/>

                    <Button Grid.Row="2" Grid.Column="1" Style="{StaticResource Pill}" Content="Refresh"
                            Command="{Binding RefreshCommand}"
                            Background="#0F1B2B" Foreground="#9AB0D7" Margin="8,0,0,0"/>
                </Grid>

                <!-- Minor status + last log line -->
                <TextBlock Grid.Row="6" Text="{Binding MinorStatus}" Foreground="#8EA4C8" FontSize="12" TextWrapping="Wrap"/>
                <TextBlock Grid.Row="7" Text="{Binding LastLogLine}" Foreground="#5F7398" FontSize="11" TextWrapping="NoWrap"
                           ToolTip="{Binding LogText}" />
            </Grid>
        </Border>

        <TextBlock Grid.Row="3" Text="© SimpleVPN" HorizontalAlignment="Center" Foreground="#5F7398" Margin="0,8,0,0"/>
    </Grid>
</Window>




